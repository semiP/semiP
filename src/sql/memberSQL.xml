<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="login">

	<typeAlias alias="login" type="member.memberbean" />

		<!-- 리절트 맵 정의 -->
	  	<resultMap id="loginRes" class="login">
			<result property="member_no" column="member_no"/>
		  	<result property="member_name" column="member_name"/>
		  	<result property="member_id" column="member_id"/>
		  	<result property="member_pw" column="member_pw"/>
		  	<result property="member_zipcode" column="member_zipcode"/>
		  	<result property="member_address1" column="member_address1"/>
			<result property="member_address2" column="member_address2"/>
		  	<result property="member_phone" column="member_phone"/>
		  	<result property="member_email" column="member_email"/>
		  	<result property="member_regdate" column="member_regdate"/>
		  	<result property="member_level" column="member_level"/>
		  	<result property="member_deleteReason" column="member_deleteReason"/>
		</resultMap>

		<sql id="select-all-login">
			SELECT * FROM MEMBER 
		</sql>

		<!-- select 쿼리문 정의 -->

		<!-- 로그인 하기 -->
		<select id="select-login" resultMap="loginRes" parameterClass="String">
			SELECT member_pw
			FROM MEMBER
			WHERE member_id = #member_id#
		</select>

		<!-- id 찾기 -->
		<select id="select-login-id" resultMap="loginRes" parameterClass="login">
			SELECT member_id
			FROM MEMBER
			WHERE member_name = #member_name# AND member_email = #member_email#
		</select>

		<!-- password 찾기 (보류) -->
		<select id="select-login-password" resultMap="loginRes" parameterClass="login">
			SELECT PASSWORD
			FROM MEMBER
			WHERE NAME = #name# AND EMAIL = #email# AND ID = #id#
		</select>

		<!-- 아이디 중복확인 -->
		<select id="select-login-id_comparison" resultMap="loginRes" parameterClass="String">
			SELECT COUNT(*)
			FROM member
			WHERE member_id = #member_id#
		</select>

		<!-- insert 쿼리문 정의 -->

		<!-- 회원가입-->
		<insert id="insertlogin" parameterClass="member.memberbean">
		
      		INSERT INTO MEMBER (MEMBER_NUMBER,
      							MEMBER_NAME,
                         		MEMBER_ID,
                         		MEMBER_PW,
                         		MEMBER_ZIPCODE,
                         		MEMBER_ADDRESS1,
								MEMBER_ADDRESS2,
								MEMBER_PHONE,
								MEMBER_EMAIL,
								MEMBER_REGDATE,
								MEMBER_LEVEL
                         )
                VALUES (MEMBER_NUMBER_SEQ.NEXTVAL,
                	 		#member_name#,
                         	#member_id#,
                         	#member_pw#,
                         	#member_zipcode#,
                         	#member_address1#,
							#member_address2#,
							#member_phone#,
							#member_email#,
							#member_regdate#,
							#member_level#
                         )
		</insert>
		

	
</sqlMap>