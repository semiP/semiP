<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>

<sqlMap namespace="basket">
	<typeAlias alias="basket" type="basket.basketVO"/>
	
	<!-- resultMap정의 -->
	  	<resultMap id="basketRes" class="basket.basketVO">
		  	<result property="basket_no" column="basket_no"/>
		  	<result property="goods_size" column="goods_size"/>
		  	<result property="goods_color" column="goods_color"/>
		  	<result property="bgoods_amount" column="bgoods_amount"/>
		  	<result property="basket_price" column="basket_price"/>
		  	<result property="basket_date" column="basket_date"/>
		  	<result property="goods_no" column="goods_no"/>
		  	<result property="goods_name" column="goods_name"/>
		  	<result property="goods_image" column="goods_image"/>
		</resultMap>
	
	<!-- 공통으로 사용할 select절 정의 -->
	<sql id="select-all">
		SELECT * FROM BASKET
	</sql>
	
	<!-- select 쿼리문 정의 -->
	<select id="selectAll" resultMap="basketRes" parameterClass="int">
		<include refid="select-all"/>
		SELECT * FROM BASKET WHERE member_no = #member_no#
		ORDER BY basket_no DESC
		<!-- ORDER BY basket_no DESC -->
	</select>
	
	<!-- <select id="selectLastBasket_no" resultClass="basket" parameterClass="int">
		SELECT max(basket_no) as basket_no FROM BASKET
	</select> -->
	
	<!-- insert 쿼리문 정의 -->
	<insert id="insertBasket" parameterClass="basket">
	
	INSERT INTO BASKET(BASKET_NO,
					GOODS_SIZE,
					GOODS_COLOR,
					BGOODS_AMOUNT,
					BASKET_PRICE,
					BASKET_DATE,
					GOODS_NO,
					GOODS_NAME,
					GOODS_IMAGE
					)
		VALUES(BASKET_NO_SEQ.NEXTVAL,
					#goods_size#,
					#goods_color#,
					#bgoods_amount#,
					#basket_price#,
					#basket_date#,
					#goods_no#,
					#goods_name#,
					#goods_image#
					)
	</insert>
	
	<!-- delete 쿼리문 정의 -->
	<delete id="deleteBasket" parameterClass="basket">
		DELETE FROM BASKET WHERE BASKET_NO = #BASKET_NO#
	</delete>
	
</sqlMap>































