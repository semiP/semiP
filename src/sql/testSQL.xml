<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="inquiry">
	<typeAlias alias="inquiry" type="test.testVO" />
	<!-- noticeList.jsp에서 관리자 / 일반회원 구분 구문 넣기!! -->
	<!-- 리절트 맵 정의 -->
	<!-- create notice table / sequence -->
	<resultMap id="inquiryRes" class="inquiry">
		<result property="inquiry_no" column="inquiry_no" />
		<result property="MEMBER_NO" column="MEMBER_NO" />
		<result property="inquiry_category" column="inquiry_category" />
		<result property="inquiry_subject" column="inquiry_subject" />
		<result property="inquiry_content" column="inquiry_content" />
		<result property="inquiry_regdate" column="inquiry_regdate" />
		<result property="inquiry_addfile" column="inquiry_addfile" />
		<result property="inquiry_ref" column="inquiry_ref" />
		<result property="inquiry_re_step" column="inquiry_re_step" />
		<result property="inquiry_level" column="inquiry_level 	" />
	</resultMap>
	
	<!-- 공통 절(select *) 정의 -->
	<sql id="select-all">
		<!-- select * from inquiry -->
		 select i.inquiry_no, m.member_no, i.inquiry_category, i.inquiry_subject, i.inquiry_content, i.inquiry_regdate, i.inquiry_addfile, i.inquiry_ref, i.inquiry_re_step, i.inquiry_level from inquiry i, member m where i.member_no = m.member_no
	</sql>

	<select id="selectAll" resultMap="inquiryRes">
		<include refid="select-all" />
		ORDER BY i.inquiry_no DESC
		<!-- ORDER BY inquiry_no DESC -->
	</select>
	<!-- 상세보기 시 사용 -->
	<select id="selectOne" resultMap="inquiryRes" parameterClass="int">
		<include refid="select-all" />
		AND i.inquiry_no = #inquiry_no#
	</select>

	<select id="selectLastNo" resultClass="inquiry" parameterClass="int">
		SELECT max(inquiry_no) as inquiry_no FROM inquiry 
	</select>

	<!-- 관리자 기능 -->
	<!-- insert 쿼리문 정의 -->
	<insert id="insert" parameterClass="inquiry">
		insert into inquiry(
		inquiry_no,
		inquiry_subject,
		inquiry_content,
		inquiry_regdate,
		)
		values(inquiry_no_seq.nextval,
		#inquiry_no#,
		#inquiry_subject#,
		#inquiry_content#,
		#inquiry_regdate#,
		)
	</insert>


</sqlMap>